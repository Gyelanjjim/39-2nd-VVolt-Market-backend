# <p align="center">🛍️ VVolt Martket

<P align="center">📆 2022.11.28 ~ 2022.12.09

## 🏆 VVolt Martket Goal

- 사용자간 중고거래를 할 수 있는 서비스 제공.
- 중고 거래 특성을 고려하여 사용자위치기반 주변 물건을 추천해주는 기능 제공

## 📼 DEMO

- <a href="https://www.youtube.com/watch?v=UDNfYsCpGR4">📎 구동 영상</a>

## 👩‍💻 DB Modeling

<img width="840" alt="스크린샷 2022-12-08 오전 1 35 46" src="https://user-images.githubusercontent.com/108253922/206603252-88d36410-961b-4ac1-85a2-a3b7dae6e694.png">

## 👩‍👩‍👧‍👦 VVolt Martket 팀

- `BE` 김한솔, 박상욱, 송철진 / `FE` 강지민, 심동섭, 정효원, 조은혜

## 📌 VVolt Martket Features

- 🟢 `한솔 BE` - DB구축, 카카오API 로그인(POST), 상점 정보(POST) 주문목록(GET), 제품 리스트 (GET), 제품 detailed (GET)
- 🟢 `상욱 BE` - DB구축, 결제 정보 (POST), 토스페이 API, 후기 (GET/POST/PATCH/DELETE), 찜 (GET/POST/DELETE), 팔로워 & 팔로잉 (GET/POST/DELETE)
- 🟢 `철진 BE` - DB구축, 상점 정보 (GET/PUT), AWS S3 이미지 등록 (POST/PUT), 찜 (GET/POST/DELETE), 팔로워 & 팔로잉 (GET/POST/DELETE)
- 🔵 `지민 FE` - 소셜로그인 페이지, 상품등록 페이지
- 🔵 `동섭 FE` - 상품리스트 페이지, 상점페이지, footer
- 🔵 `효원 FE` - 회원가입 페이지, 결제 페이지
- 🔵 `은혜 FE` - nav, side바, 상품 디테이 페이지

## ⭐️ 담당 업무

1. 상점(user) 정보 조회(GET)

- 누구나 자유롭게 각 상점 정보를 조회할 수 있도록, 클라이언트가 userId를 path 파라미터로 입력하여 요청하면 해당 상점 정보를 조회하여 적절한 상태코드(`200`)와 메시지를 응답하도록 구현했습니다
- `isMyShop`: 인증된 사용자만 본인 상점의 개인정보에 접근할 수 있도록 JWT를 사용해 인증된 userIdByToken과 path 파라미터의 userId를 비교하고 일치 여부를 응답합니다.(클라이언트는 일치 여부에 따라 개인 상점 정보를 수정할 수 있는 페이지로 이동할 수 있습니다)
- `isFollow`: path 파라미터로 입력한 userId의 상점이 로그인 사용자가 팔로우 중인 상점인지 여부입니다.
- `myData`: JWT를 사용해 인증한 사용자의 개인 정보입니다. 이 정보는 사용자가 상점에 리뷰를 작성하거나 상품 구매 시 본인 확인을 위해 사용됩니다
- `shopData`: path 파라미터로 입력한 userId가 일치하는 상점 정보(id, 상점이름, 프로필 사진, 소개글, 상점오픈일, 주소, 사용자이름, 상품id, 평균별점, 리뷰 수, 판매중인 상품 수, 판매 완료된 상품 수, 찜 수, 팔로우 수, 주문 수) 입니다.

2. 상점(user) 정보 수정(PUT)

- 인증된 사용자만 본인의 상점 정보를 수정할 수 있도록 JWT로 인증된 userIdByToken와 변경할 상점 정보(상점 이름, 프로필 사진, 소개글, 주소)를 입력받으면 값을 수정하고 적절한 상태코드(`200`)와 메시지를 응답하도록 구현했습니다.
- 상점 이름은 유일한 값이므로 클라이언트로부터 입력받은 값을 DB에서 조회하여 중복될 경우 클라이언트가 알 수 있도록 적절한 상태코드(400)와 중복되었다는 메시지를 응답합니다
- 프로필 사진은 하나의 이미지만 등록할 수 있기 때문에 AWS multer-S3의 `single()` 메소드를 사용해 S3버킷에 이미지를 등록합니다
- 각각의 변경 대상(키)은 독립된 리소스이므로 하나씩 수정하는 PUT을 사용합니다.

3. 상품 정보 등록(POST)

- 인증된 사용자가 판매할 상품 정보(이름, 설명, 가격, 주소, 판매 상태, 카테고리, 이미지url)를 본인 상점에 등록할 수 있도록, 클라이언트로부터 JWT를 사용해 인증된 userId와 상품 정보를 받아 DB에 등록하고 적절한 상태코드(`201`)와 메시지를 응답하도록 구현했습니다.
- 상품 사진을 여러 장 등록할 수 있도록 AWS multer-S3의 `array()` 메소드를 사용했고, 업로드한 파일명이 동일하지 않도록 `Date.now()`로 파일명을 수정하여 S3버킷에 업로드합니다. 업로드 후, 클라이언트의 화면에 이미지를 띄울 수 있게 적절한 상태코드(`201`)와 변환된 `이미지url`들을 메시지에 배열로 담아 클라이언트에게 응답합니다

4. 상품 정보 수정(PATCH)

- 인증된 사용자가 본인 상점에 등록한 상품 정보를 수정할 수 있도록, 클라이언트로부터 JWT를 사용해 인증된 userId와 변경할 상품 정보를 받아 DB에 등록하고 적절한 상태코드(`200`)와 메시지를 응답하도록 구현했습니다.
- 상품 정보의 일부 또는 전체를 지정하여 수정하기 위해서 PATCH를 사용합니다.

5. 찜 등록(POST) / 삭제(DELETE)

- 로그인한 사용자가 마음에 든 상품을 언제든지 확인하거나 목록에서 지울 수 있게 하기 위해서, JWT로 본인 인증한 userId와 상품id를 받아 찜을 등록하거나 삭제하도록 구현했습니다.
- 클라이언트가 요청에 대해 정상적으로 동작하는지 여부를 확인할 수 있도록 JWT로 본인 인증한 userId와 상품id를 받아 DB에서 조회하여 없으면 등록하고 적절한 상태코드(`201`)를 응답합니다. 조회한 값이 있으면 삭제하고 적절한 상태코드(`204`)를 응답합니다.

6. 팔로우 등록(POST) / 삭제(DELETE)

- 로그인한 사용자가 마음에 든 상점을 언제든지 확인하거나 목록에서 지울 수 있도록 하기 위해, JWT로 본인 인증한 userId와 팔로우 대상 상점id를 받아 팔로우를 등록하거나 삭제하도록 구현했습니다.
- 클라이언트가 요청에 대한 정상동작을 확인할 수 있도록 JWT로 본인 인증한 userId와 팔로우 대상 상점id를 받아 DB에서 조회하여 없으면 팔로우를 등록하고 적절한 상태코드(`201`)를 응답합니다. 조회한 값이 있으면 팔로우를 삭제하고 적절한 상태코드(`204`)를 응답합니다.

## 🛠 VVolt Martket Tools

- `Notion`, `Trello`, `Git-book`, `TablePlus`, `Github`, `Slack`, `PostMan`

## 🛠 VVolt Martket Engineering Stack

- 💻 BE:
  - `JavaScript`, `Node.js`, `Express.js`, `AWS S3`, `MySql`, `TypeORM(pooling)`
- 💻 FE:
  - `JavaScript`, `React`, `styled-component`

<br>

---

### Reference

- 이 프로젝트는 번개장터 사이트를 참조하여 학습목적으로 만들었습니다. 실무수준의 프로젝트이지만 학습용으로 만들었기 때문에 이 코드를 활용하여 이득을 취하거나 무단 배포할 경우 법적으로 문제될 수 있습니다.

- 이 프로젝트에서 사용하고 있는 사진 대부분은 위코드에서 구매한 것이므로 해당 프로젝트 외부인이 사용할 수 없습니다.

---
